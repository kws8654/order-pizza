{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wonsub/Desktop/\\u110B\\u116F\\u11AB\\u1109\\u1165\\u11B8/\\u110F\\u1169\\u1103\\u1175\\u11BC/\\u1111\\u1173\\u1105\\u1169\\u1100\\u1173\\u1105\\u1162\\u11B7/Project/Order Food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wonsub/Desktop/\\u110B\\u116F\\u11AB\\u1109\\u1165\\u11B8/\\u110F\\u1169\\u1103\\u1175\\u11BC/\\u1111\\u1173\\u1105\\u1169\\u1100\\u1173\\u1105\\u1162\\u11B7/Project/Order Food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/wonsub/Desktop/\\u110B\\u116F\\u11AB\\u1109\\u1165\\u11B8/\\u110F\\u1169\\u1103\\u1175\\u11BC/\\u1111\\u1173\\u1105\\u1169\\u1100\\u1173\\u1105\\u1162\\u11B7/Project/Order Food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/wonsub/Desktop/\\u110B\\u116F\\u11AB\\u1109\\u1165\\u11B8/\\u110F\\u1169\\u1103\\u1175\\u11BC/\\u1111\\u1173\\u1105\\u1169\\u1100\\u1173\\u1105\\u1162\\u11B7/Project/Order Food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{Modal}from'../UI/Modal';import styles from'./Cart.module.css';import CartContext from'../../store/CartContext';import CartItem from'./CartItem';import Checkout from'./Checkout';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(_ref){var hideCart=_ref.hideCart;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCheckout=_useState2[0],setIsCheckout=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitting=_useState4[0],setIsSubmitting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),didSubmit=_useState6[0],setDidSubmit=_useState6[1];var cartCtx=useContext(CartContext);var totalAmount=\"\".concat(cartCtx.totalAmount,\"\\uC6D0\");var hasItems=cartCtx.items.length>0;var cartItemAddHandler=function cartItemAddHandler(item){cartCtx.addItem(_objectSpread(_objectSpread({},item),{},{amount:1}));};var cartItemRemoveHandler=function cartItemRemoveHandler(id){cartCtx.removeItem(id);};var orderHandler=function orderHandler(){setIsCheckout(true);};var submitOrderHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userData){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSubmitting(true);_context.next=3;return fetch('https://react-practice-9b279-default-rtdb.firebaseio.com/orders.json',{method:'POST',body:JSON.stringify({user:userData,orderedItems:cartCtx.items})});case 3:res=_context.sent;setIsSubmitting(false);setDidSubmit(true);cartCtx.clearCart();case 7:case\"end\":return _context.stop();}}},_callee);}));return function submitOrderHandler(_x){return _ref2.apply(this,arguments);};}();var cartItems=/*#__PURE__*/_jsx(\"ul\",{className:styles.cartItems,children:cartCtx.items.map(function(item){return/*#__PURE__*/_jsx(CartItem,{name:item.name,amount:item.amount,price:item.price,onAdd:cartItemAddHandler.bind(null,item),onRemove:cartItemRemoveHandler.bind(null,item.id)},item.id);})});var cartModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[cartItems,isCheckout&&/*#__PURE__*/_jsx(Checkout,{hideCart:hideCart,totalAmount:totalAmount,submitOrder:submitOrderHandler}),!isCheckout&&/*#__PURE__*/_jsxs(\"div\",{className:styles.actions,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.buttonAlt,onClick:hideCart,children:\"\\uB2EB\\uAE30\"}),hasItems&&/*#__PURE__*/_jsx(\"button\",{className:styles.button,onClick:orderHandler,children:\"\\uC8FC\\uBB38\"})]})]});var submittingModalContent=/*#__PURE__*/_jsx(\"p\",{className:styles.orderInfo,children:\"\\uC8FC\\uBB38 \\uCC98\\uB9AC \\uC911\\uC785\\uB2C8\\uB2E4\"});var submitedModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:styles.orderInfo,children:\"\\uC8FC\\uBB38 \\uC644\\uB8CC\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.actions,children:/*#__PURE__*/_jsx(\"button\",{className:styles.button,onClick:hideCart,children:\"\\uB2EB\\uAE30\"})})]});return/*#__PURE__*/_jsxs(Modal,{hideCart:hideCart,children:[!isSubmitting&&!didSubmit&&cartModalContent,isSubmitting&&submittingModalContent,!isSubmitting&&didSubmit&&submitedModalContent]});};export default Cart;","map":{"version":3,"sources":["/Users/wonsub/Desktop/원섭/코딩/프로그램/Project/Order Food/src/components/Cart/Cart.js"],"names":["React","useContext","useState","Modal","styles","CartContext","CartItem","Checkout","Cart","hideCart","isCheckout","setIsCheckout","isSubmitting","setIsSubmitting","didSubmit","setDidSubmit","cartCtx","totalAmount","hasItems","items","length","cartItemAddHandler","item","addItem","amount","cartItemRemoveHandler","id","removeItem","orderHandler","submitOrderHandler","userData","fetch","method","body","JSON","stringify","user","orderedItems","res","clearCart","cartItems","map","name","price","bind","cartModalContent","actions","buttonAlt","button","submittingModalContent","orderInfo","submitedModalContent"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Modal } from '../UI/Modal';\nimport styles from './Cart.module.css';\nimport CartContext from '../../store/CartContext';\nimport CartItem from './CartItem';\nimport Checkout from './Checkout';\n\nconst Cart = ({ hideCart }) => {\n  const [isCheckout, setIsCheckout] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [didSubmit, setDidSubmit] = useState(false);\n  const cartCtx = useContext(CartContext);\n  const totalAmount = `${cartCtx.totalAmount}원`;\n  const hasItems = cartCtx.items.length > 0;\n\n  const cartItemAddHandler = (item) => {\n    cartCtx.addItem({ ...item, amount: 1 });\n  };\n\n  const cartItemRemoveHandler = (id) => {\n    cartCtx.removeItem(id);\n  };\n\n  const orderHandler = () => {\n    setIsCheckout(true);\n  };\n\n  const submitOrderHandler = async (userData) => {\n    setIsSubmitting(true);\n    const res = await fetch(\n      'https://react-practice-9b279-default-rtdb.firebaseio.com/orders.json',\n      {\n        method: 'POST',\n        body: JSON.stringify({\n          user: userData,\n          orderedItems: cartCtx.items,\n        }),\n      }\n    );\n    setIsSubmitting(false);\n    setDidSubmit(true);\n    cartCtx.clearCart();\n  };\n\n  const cartItems = (\n    <ul className={styles.cartItems}>\n      {cartCtx.items.map((item) => (\n        <CartItem\n          key={item.id}\n          name={item.name}\n          amount={item.amount}\n          price={item.price}\n          onAdd={cartItemAddHandler.bind(null, item)}\n          onRemove={cartItemRemoveHandler.bind(null, item.id)}\n        />\n      ))}\n    </ul>\n  );\n  const cartModalContent = (\n    <>\n      {cartItems}\n      {isCheckout && (\n        <Checkout\n          hideCart={hideCart}\n          totalAmount={totalAmount}\n          submitOrder={submitOrderHandler}\n        />\n      )}\n      {!isCheckout && (\n        <div className={styles.actions}>\n          <button className={styles.buttonAlt} onClick={hideCart}>\n            닫기\n          </button>\n          {hasItems && (\n            <button className={styles.button} onClick={orderHandler}>\n              주문\n            </button>\n          )}\n        </div>\n      )}\n    </>\n  );\n\n  const submittingModalContent = (\n    <p className={styles.orderInfo}>주문 처리 중입니다</p>\n  );\n\n  const submitedModalContent = (\n    <>\n      <p className={styles.orderInfo}>주문 완료</p>\n      <div className={styles.actions}>\n        <button className={styles.button} onClick={hideCart}>\n          닫기\n        </button>\n      </div>\n    </>\n  );\n\n  return (\n    <Modal hideCart={hideCart}>\n      {!isSubmitting && !didSubmit && cartModalContent}\n      {isSubmitting && submittingModalContent}\n      {!isSubmitting && didSubmit && submitedModalContent}\n    </Modal>\n  );\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}